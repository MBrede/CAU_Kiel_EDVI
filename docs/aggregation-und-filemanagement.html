<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Aggregation und Filemanagement | EDV1</title>
  <meta name="description" content="Einführung in die computerunterstützte Datananalyse mit R im Wintersemester 2020" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Aggregation und Filemanagement | EDV1" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in die computerunterstützte Datananalyse mit R im Wintersemester 2020" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Aggregation und Filemanagement | EDV1" />
  
  <meta name="twitter:description" content="Einführung in die computerunterstützte Datananalyse mit R im Wintersemester 2020" />
  

<meta name="author" content="Max Brede" />


<meta name="date" content="2021-02-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="faktoren-und-aggregation.html"/>
<link rel="next" href="abbildungen-i.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EDV 1 <br> WiSe 20</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html"><i class="fa fa-check"></i>Lehrplan</a>
<ul>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#semesterplan"><i class="fa fa-check"></i>Semesterplan</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#übungsformat"><i class="fa fa-check"></i>Übungsformat</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#lehrziele-für-jede-sitzung"><i class="fa fa-check"></i>Lehrziele für jede Sitzung</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#prüfungsleistung"><i class="fa fa-check"></i>Prüfungsleistung</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html"><i class="fa fa-check"></i>Vorlesung I - Rste Schritte</a>
<ul>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#organisatorisches"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#einführung"><i class="fa fa-check"></i>Einführung</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#grundlegende-rechenoperationen"><i class="fa fa-check"></i>Grundlegende Rechenoperationen</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#ausdrücke-funktionen-argumente"><i class="fa fa-check"></i>Ausdrücke, Funktionen, Argumente</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#objekte"><i class="fa fa-check"></i>Objekte</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#hausaufgabe"><i class="fa fa-check"></i>Hausaufgabe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html"><i class="fa fa-check"></i>elementare Datenverarbeitung</a>
<ul>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#organisatorisches-1"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#vektoren"><i class="fa fa-check"></i>Vektoren</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#indizierung"><i class="fa fa-check"></i>Indizierung</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#systematische-wertefolgen-erzeugen"><i class="fa fa-check"></i>Systematische Wertefolgen erzeugen</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#daten-transformieren"><i class="fa fa-check"></i>Daten transformieren</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#einfache-deskriptiv-statistische-kennwerte"><i class="fa fa-check"></i>Einfache deskriptiv-statistische Kennwerte</a></li>
</ul></li>
<li><a href="tidyverse-und-tibbles.html#tidyverse-und-tibbles"><code>tidyverse</code> und <code>tibbles</code></a>
<ul>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#pakete-benutzen"><i class="fa fa-check"></i>Pakete benutzen</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#datensätze-erstellen-und-ergänzen"><i class="fa fa-check"></i>Datensätze erstellen und ergänzen</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#datensätze-sortieren-und-indizieren"><i class="fa fa-check"></i>Datensätze sortieren und indizieren</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#vorlesung"><i class="fa fa-check"></i>Vorlesung</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html"><i class="fa fa-check"></i>Faktoren und Aggregation</a>
<ul>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#organisatorisches-3"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#faktoren"><i class="fa fa-check"></i>Faktoren</a></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#daten-einlesen-i"><i class="fa fa-check"></i>Daten einlesen I</a></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#deskriptive-kennwerte"><i class="fa fa-check"></i>deskriptive Kennwerte</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html"><i class="fa fa-check"></i>Aggregation und Filemanagement</a>
<ul>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html#organisatorisches-4"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html#aggregation"><i class="fa fa-check"></i>Aggregation</a></li>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html#daten-einlesen-ii-und-zusammenfügen"><i class="fa fa-check"></i>Daten einlesen II und zusammenfügen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html"><i class="fa fa-check"></i>Abbildungen I</a>
<ul>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#organisatorisches-5"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#pivotieren-von-datensätzen"><i class="fa fa-check"></i>Pivotieren von Datensätzen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#diagramme-erstellen"><i class="fa fa-check"></i>Diagramme erstellen</a></li>
<li><a href="abbildungen-i.html#geoms"><code>geom</code>s</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#line-charts"><i class="fa fa-check"></i>line-charts</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#balkendiagramme"><i class="fa fa-check"></i>Balkendiagramme</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#verteilungsdarstellungen"><i class="fa fa-check"></i>Verteilungsdarstellungen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html"><i class="fa fa-check"></i>Abbildungen II</a>
<ul>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#organisatorisches-6"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#gruppierte-darstellungen"><i class="fa fa-check"></i>Gruppierte Darstellungen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#layer-für-zusätzliche-informationen"><i class="fa fa-check"></i>Layer für zusätzliche Informationen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#zusätzliche-tweaks"><i class="fa fa-check"></i>Zusätzliche tweaks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur-1.html"><a href="literatur-1.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Lizenzvertrag" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDV1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="aggregation-und-filemanagement" class="section level1">
<h1>Aggregation und Filemanagement</h1>
<div id="organisatorisches-4" class="section level2">
<h2>Organisatorisches</h2>
<div id="semesterplan-5" class="section level3">
<h3>Semesterplan</h3>
<table class=" lightable-paper" style="font-size: 15px; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Einheit
</th>
<th style="text-align:left;">
Vorlesung
</th>
<th style="text-align:left;">
Übungswoche
</th>
<th style="text-align:left;">
Thema
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
2.11.20
</td>
<td style="text-align:left;">
keine Übung
</td>
<td style="text-align:left;">
Grundlagen und Begriffe
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
16.11.20
</td>
<td style="text-align:left;">
KW 48
</td>
<td style="text-align:left;">
Vektoren und Indizierung
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Datenformate erstellen und transformieren
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
30.11.20
</td>
<td style="text-align:left;">
KW 50
</td>
<td style="text-align:left;">
Pakete installieren und benutzen
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Datensätze erstellen und ergänzen können
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Datensätze sortieren und indizieren können
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
14.12.20
</td>
<td style="text-align:left;">
KW 1
</td>
<td style="text-align:left;">
Faktoren
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
deskriptive Kennwerte
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Aggregation I
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
11.01.21
</td>
<td style="text-align:left;">
KW 3
</td>
<td style="text-align:left;">
Aggregation II
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
In- und Export von Datensätzen
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
25.01.21
</td>
<td style="text-align:left;">
KW 5
</td>
<td style="text-align:left;">
Grafische Darstellungen I
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
08.02.21
</td>
<td style="text-align:left;">
KW 7
</td>
<td style="text-align:left;">
Grafische Darstellungen II
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
22.02.21
</td>
<td style="text-align:left;">
keine Übung
</td>
<td style="text-align:left;">
Puffer
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Probeklausur
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="aggregation" class="section level2">
<h2>Aggregation</h2>
<div id="aggregation-über-mehrere-spalten" class="section level3">
<h3>Aggregation über mehrere Spalten</h3>
<p>Beispiel aus der letzten Sitzung:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="aggregation-und-filemanagement.html#cb341-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/test.csv&quot;</span>)</span>
<span id="cb341-2"><a href="aggregation-und-filemanagement.html#cb341-2" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span></span>
<span id="cb341-3"><a href="aggregation-und-filemanagement.html#cb341-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb341-4"><a href="aggregation-und-filemanagement.html#cb341-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">m_t1 =</span> <span class="fu">mean</span>(points_t1),</span>
<span id="cb341-5"><a href="aggregation-und-filemanagement.html#cb341-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_t1 =</span> <span class="fu">sd</span>(points_t1),</span>
<span id="cb341-6"><a href="aggregation-und-filemanagement.html#cb341-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">m_t2 =</span> <span class="fu">mean</span>(points_t2),</span>
<span id="cb341-7"><a href="aggregation-und-filemanagement.html#cb341-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_t2 =</span> <span class="fu">sd</span>(points_t2))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   group  m_t1 sd_t1  m_t2 sd_t2
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1  3.8  0.889  4.3  1.32 
## 2     2  3.52 0.576  5.18 0.873
## 3     3  4.45 0.354  5.4  0.566</code></pre>
</div>
<div id="across-funktion" class="section level3">
<h3><code>across</code>-Funktion</h3>
<p>Statt die Spalten auf denen wir Operationen durchführen wollen alle einzeln auszuwählen, können wir mit der <code>across</code>-Funktion auch eine Stapelweise Operation anstoßen.</p>
<p>Dazu benutzen wir die <code>select</code>-helper, die wir schon kennen:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="aggregation-und-filemanagement.html#cb343-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb343-2"><a href="aggregation-und-filemanagement.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&#39;points&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    points_t1 points_t2
##        &lt;dbl&gt;     &lt;dbl&gt;
##  1       4.8       2.8
##  2       3.2       5.8
##  3       3.5       4.8
##  4       3.1       5.3
##  5       4.2       5.8
##  6       4.7       5  
##  7       3.4       4.7
##  8       2.8       6.2
##  9       4.2       4  
## 10       4         5.2</code></pre>
<!-- ### `across`-Funktion {.smaller} -->
<p>Diese praktischen Tools können wir jetzt mit der <code>across</code>-Funktion in unsere <code>summarise</code>-pipeline integrieren:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="aggregation-und-filemanagement.html#cb345-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb345-2"><a href="aggregation-und-filemanagement.html#cb345-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb345-3"><a href="aggregation-und-filemanagement.html#cb345-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">&#39;points&#39;</span>),</span>
<span id="cb345-4"><a href="aggregation-und-filemanagement.html#cb345-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> mean,</span>
<span id="cb345-5"><a href="aggregation-und-filemanagement.html#cb345-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.names =</span> <span class="st">&#39;m_{.col}&#39;</span>),</span>
<span id="cb345-6"><a href="aggregation-und-filemanagement.html#cb345-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">&#39;points&#39;</span>),</span>
<span id="cb345-7"><a href="aggregation-und-filemanagement.html#cb345-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> sd,</span>
<span id="cb345-8"><a href="aggregation-und-filemanagement.html#cb345-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.names =</span> <span class="st">&#39;sd_{.col}&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
##   group m_points_t1 m_points_t2 sd_points_t1
##   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1     1        3.8         4.3         0.889
## 2     2        3.52        5.18        0.576
## 3     3        4.45        5.4         0.354
##   sd_points_t2 sd_m_points_t1 sd_m_points_t2
##          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;
## 1        1.32              NA             NA
## 2        0.873             NA             NA
## 3        0.566             NA             NA</code></pre>
</div>
<div id="frage" class="section level3 smaller">
<h3>Frage</h3>
<pre><code>## # A tibble: 3 x 7
##   group m_points_t1 m_points_t2 sd_points_t1
##   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1     1        3.8         4.3         0.889
## 2     2        3.52        5.18        0.576
## 3     3        4.45        5.4         0.354
##   sd_points_t2 sd_m_points_t1 sd_m_points_t2
##          &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;
## 1        1.32              NA             NA
## 2        0.873             NA             NA
## 3        0.566             NA             NA</code></pre>
<p>Warum sind da zwei leere Spalten?</p>
<ol style="list-style-type: decimal">
<li>Weil wir was falsch gemacht haben.</li>
<li>Weil auch die Streuungen der Mittelwerte berechnet wurde, also von jeweils einem Wert, was nicht geht.</li>
<li>Das ist das Ergebnis der Standardisierung der Streuungen am N, da das N hier 0 ist, wird durch 0 geteilt und es kommt nix raus.</li>
</ol>
</div>
<div id="lazy-evaluation" class="section level3">
<h3>lazy evaluation</h3>
<p>Die <code>tidyverse</code>-Funktionen folgen dem Prinzip der ‘lazy evaluation,’ das heißt ein Argument wird nach dem anderen ausgeführt.</p>
<p>Wenn wir also im ersten Argument Spalten erstellen, die zusätzlich zum ursprünglichen Datensatz von <code>contains</code> betroffen werden, werden die folgenden Funktionen auch auf diese angewandt. Um das zu verhindern, können wir das <code>.fn</code>-Argument erweitern und im <code>.names</code>- Argument einen weiteren Platzhalter verwenden:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="aggregation-und-filemanagement.html#cb348-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb348-2"><a href="aggregation-und-filemanagement.html#cb348-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb348-3"><a href="aggregation-und-filemanagement.html#cb348-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">&#39;points&#39;</span>),</span>
<span id="cb348-4"><a href="aggregation-und-filemanagement.html#cb348-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> <span class="fu">list</span>(<span class="at">mean =</span> mean,</span>
<span id="cb348-5"><a href="aggregation-und-filemanagement.html#cb348-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">sd =</span> sd), </span>
<span id="cb348-6"><a href="aggregation-und-filemanagement.html#cb348-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.names =</span> <span class="st">&#39;{.fn}_{.col}&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   group mean_points_t1 sd_points_t1 mean_points_t2
##   &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;
## 1     1           3.8         0.889           4.3 
## 2     2           3.52        0.576           5.18
## 3     3           4.45        0.354           5.4 
##   sd_points_t2
##          &lt;dbl&gt;
## 1        1.32 
## 2        0.873
## 3        0.566</code></pre>
<!-- ### lazy evaluation -->
<p>Die lazy evaluation ist ein feature, das wir zum Beispiel dazu benutzen können, Zwischenergebnisse zu benutzen.
Da die <code>summarise</code>-Argumente Schritt für Schritt ausgeführt werden, funktioniert der folgende Code:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="aggregation-und-filemanagement.html#cb350-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb350-2"><a href="aggregation-und-filemanagement.html#cb350-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb350-3"><a href="aggregation-und-filemanagement.html#cb350-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb350-4"><a href="aggregation-und-filemanagement.html#cb350-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(points_t1),</span>
<span id="cb350-5"><a href="aggregation-und-filemanagement.html#cb350-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sem =</span> sd <span class="sc">/</span> <span class="fu">sqrt</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   group     n    sd   sem
##   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     3 0.889 0.513
## 2     2     5 0.576 0.258
## 3     3     2 0.354 0.25</code></pre>
</div>
<div id="mit-aggregierten-daten-weiterarbeiten" class="section level3">
<h3>Mit aggregierten Daten weiterarbeiten</h3>
<p>Um die Ergebnisse einer nach einer <code>group</code>ierten <code>summarise</code>-Funktion für weitere Manipulationen zu verwenden, müssen wir noch ein <code>ungroup</code> in die pipe einfügen, um R mitzuteilen dass die folgenden Operationen wieder Datensatz-übergreifend gedacht sind. So können wir zum Beispiel aus absoluten relative Häufigkeiten errechnen.</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="aggregation-und-filemanagement.html#cb352-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span> </span>
<span id="cb352-2"><a href="aggregation-und-filemanagement.html#cb352-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span></span>
<span id="cb352-3"><a href="aggregation-und-filemanagement.html#cb352-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb352-4"><a href="aggregation-und-filemanagement.html#cb352-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb352-5"><a href="aggregation-und-filemanagement.html#cb352-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_n =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   group     n rel_n
##   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
## 1     1     3   0.3
## 2     2     5   0.5
## 3     3     2   0.2</code></pre>
</div>
</div>
<div id="daten-einlesen-ii-und-zusammenfügen" class="section level2">
<h2>Daten einlesen II und zusammenfügen</h2>
<div id="daten-aus-textfiles" class="section level3">
<h3>Daten aus Textfiles</h3>
<p>Daten aus Textfiles lassen sich am Einfachsten (wie letzte Sitzung auch schon kurz gezeigt) über die RStudio-IDE einlesen.</p>
<p>Dazu einfach auf das ‘Import Dataset’- Menü über dem Environment klicken und ‘From Text (readr)…’ auswählen:</p>
<div class="cols">
<div class="col">
<p><img src="imgs/menu.png" width="450px" style="display: block; margin: auto;" /></p>
</div>
<div class="col">
<p><img src="imgs/menu2.png" width="450px" style="display: block; margin: auto;" /></p>
</div>
</div>
<p><img src="imgs/read_txt.png" width="600px" style="display: block; margin: auto;" /></p>
<!-- ### Daten aus Textfiles -->
<p>Der mit der grafischen Oberfläche erstellte Code lässt sich dann einfach in’s R-Skript kopieren:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="aggregation-und-filemanagement.html#cb354-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/test.csv&quot;</span>)</span>
<span id="cb354-2"><a href="aggregation-und-filemanagement.html#cb354-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb354-3"><a href="aggregation-und-filemanagement.html#cb354-3" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/test2.txt&quot;</span>, </span>
<span id="cb354-4"><a href="aggregation-und-filemanagement.html#cb354-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>,</span>
<span id="cb354-5"><a href="aggregation-und-filemanagement.html#cb354-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">escape_double =</span> <span class="cn">FALSE</span>, </span>
<span id="cb354-6"><a href="aggregation-und-filemanagement.html#cb354-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb354-7"><a href="aggregation-und-filemanagement.html#cb354-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb354-8"><a href="aggregation-und-filemanagement.html#cb354-8" aria-hidden="true" tabindex="-1"></a>stadtteile <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/test3.csv&quot;</span>, </span>
<span id="cb354-9"><a href="aggregation-und-filemanagement.html#cb354-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;;&quot;</span>, </span>
<span id="cb354-10"><a href="aggregation-und-filemanagement.html#cb354-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">escape_double =</span> <span class="cn">FALSE</span>, </span>
<span id="cb354-11"><a href="aggregation-und-filemanagement.html#cb354-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">&quot;,&quot;</span>, </span>
<span id="cb354-12"><a href="aggregation-und-filemanagement.html#cb354-12" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">encoding =</span> <span class="st">&quot;ISO-8859-2&quot;</span>, </span>
<span id="cb354-13"><a href="aggregation-und-filemanagement.html#cb354-13" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">asciify =</span> <span class="cn">TRUE</span>), </span>
<span id="cb354-14"><a href="aggregation-und-filemanagement.html#cb354-14" aria-hidden="true" tabindex="-1"></a>                    <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb354-15"><a href="aggregation-und-filemanagement.html#cb354-15" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(stadtteile)</span></code></pre></div>
<pre><code>## Rows: 30
## Columns: 6
## $ Land      &lt;chr&gt; &quot;de-sh&quot;, &quot;de-sh&quot;, &quot;de-sh&quot;, &quot;de-sh…
## $ Stadt     &lt;chr&gt; &quot;Kiel&quot;, &quot;Kiel&quot;, &quot;Kiel&quot;, &quot;Kiel&quot;, &quot;…
## $ Kategorie &lt;chr&gt; &quot;geo&quot;, &quot;geo&quot;, &quot;geo&quot;, &quot;geo&quot;, &quot;geo&quot;…
## $ Merkmal   &lt;chr&gt; &quot;Flächen in Hektar&quot;, &quot;Flächen in …
## $ Stadtteil &lt;chr&gt; &quot;Altstadt&quot;, &quot;Vorstadt&quot;, &quot;Exerzier…
## $ Hektar    &lt;dbl&gt; 35.0983, 45.8515, 42.0120, 45.133…</code></pre>
</div>
<div id="daten-aus-excel-dateien" class="section level3">
<h3>Daten aus Excel-Dateien</h3>
<p>Daten aus Excel-Dateien lassen sich ganz ähnlich einlesen, nur dass wir statt ‘From Text (readr)…’ nun ‘From Excel…’ auswählen.</p>
<p><img src="imgs/read_excel.png" width="600px" style="display: block; margin: auto;" /></p>
<!-- ### Daten aus Excel-Dateien -->
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="aggregation-und-filemanagement.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb356-2"><a href="aggregation-und-filemanagement.html#cb356-2" aria-hidden="true" tabindex="-1"></a>kiel_haushalte <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/kiel.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;Haushalte&quot;</span>)</span>
<span id="cb356-3"><a href="aggregation-und-filemanagement.html#cb356-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb356-4"><a href="aggregation-und-filemanagement.html#cb356-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(kiel_haushalte)</span></code></pre></div>
<pre><code>## Rows: 30
## Columns: 7
## $ Stadtteile                     &lt;chr&gt; &quot;Altstadt&quot;, …
## $ Einpersonen                    &lt;dbl&gt; 384, 657, 32…
## $ `Paar ohne Kind`               &lt;dbl&gt; 305, 303, 14…
## $ `Paar mit Kindern`             &lt;dbl&gt; 165, 167, 92…
## $ `Paar mit Nachkommen`          &lt;dbl&gt; 29, 13, 56, …
## $ Alleinerziehende               &lt;dbl&gt; 28, 34, 215,…
## $ `Sonst. Mehrpersonenhaushalte` &lt;dbl&gt; 118, 110, 44…</code></pre>
</div>
<div id="kombinieren-von-datensätzen" class="section level3">
<h3>Kombinieren von Datensätzen</h3>
<p>Das <code>tidyverse</code> bietet eine sehr praktische Familie von Funktionen, um Datensätze zusammenzufügen, die <code>join</code>-Funktionen.</p>
<p>Wir werden hier erstmal nur eine davon benutzen, die <code>left_join</code>-Funktion. Sie nimmt zwei Datensätze als Argumente, gerne auch den ersten als Ergebnis einer pipeline, und fügt diese anhand einer im <code>by</code>-Argument angegebenen Spalte zusammen.</p>
<p>Wir wollen mal die Datensätze zu den Haushalten und der Fläche der Kieler Stadtteile zusammenfügen:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="aggregation-und-filemanagement.html#cb358-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> stadtteile <span class="sc">%&gt;%</span> </span>
<span id="cb358-2"><a href="aggregation-und-filemanagement.html#cb358-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(kiel_haushalte,<span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Stadtteil&#39;</span> <span class="ot">=</span> <span class="st">&#39;Stadtteile&#39;</span>))</span>
<span id="cb358-3"><a href="aggregation-und-filemanagement.html#cb358-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-4"><a href="aggregation-und-filemanagement.html#cb358-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code></pre></div>
<pre><code>## Rows: 30
## Columns: 12
## $ Land                           &lt;chr&gt; &quot;de-sh&quot;, &quot;de…
## $ Stadt                          &lt;chr&gt; &quot;Kiel&quot;, &quot;Kie…
## $ Kategorie                      &lt;chr&gt; &quot;geo&quot;, &quot;geo&quot;…
## $ Merkmal                        &lt;chr&gt; &quot;Flächen in …
## $ Stadtteil                      &lt;chr&gt; &quot;Altstadt&quot;, …
## $ Hektar                         &lt;dbl&gt; 35.0983, 45.…
## $ Einpersonen                    &lt;dbl&gt; 384, 657, 32…
## $ `Paar ohne Kind`               &lt;dbl&gt; 305, 303, 14…
## $ `Paar mit Kindern`             &lt;dbl&gt; 165, 167, 92…
## $ `Paar mit Nachkommen`          &lt;dbl&gt; 29, 13, 56, …
## $ Alleinerziehende               &lt;dbl&gt; 28, 34, 215,…
## $ `Sonst. Mehrpersonenhaushalte` &lt;dbl&gt; 118, 110, 44…</code></pre>
<!-- ### Kombinieren von Datensätzen {.smaller} -->
<p>Das sieht ja sehr nett aus, wir können den zusammengefügten Datensatz nun benutzen, um eine Korrelationsmatrix für alle numerischen Spalten zu erstellen:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="aggregation-und-filemanagement.html#cb360-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb360-2"><a href="aggregation-und-filemanagement.html#cb360-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb360-3"><a href="aggregation-und-filemanagement.html#cb360-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>() </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Hektar
</th>
<th style="text-align:right;">
Einpersonen
</th>
<th style="text-align:right;">
Paar ohne Kind
</th>
<th style="text-align:right;">
Paar mit Kindern
</th>
<th style="text-align:right;">
Paar mit Nachkommen
</th>
<th style="text-align:right;">
Alleinerziehende
</th>
<th style="text-align:right;">
Sonst. Mehrpersonenhaushalte
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Hektar
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
-0.029
</td>
<td style="text-align:right;">
0.364
</td>
<td style="text-align:right;">
0.314
</td>
<td style="text-align:right;">
0.445
</td>
<td style="text-align:right;">
0.199
</td>
<td style="text-align:right;">
0.204
</td>
</tr>
<tr>
<td style="text-align:left;">
Einpersonen
</td>
<td style="text-align:right;">
-0.029
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.766
</td>
<td style="text-align:right;">
0.565
</td>
<td style="text-align:right;">
0.426
</td>
<td style="text-align:right;">
0.617
</td>
<td style="text-align:right;">
0.750
</td>
</tr>
<tr>
<td style="text-align:left;">
Paar ohne Kind
</td>
<td style="text-align:right;">
0.364
</td>
<td style="text-align:right;">
0.766
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.822
</td>
<td style="text-align:right;">
0.814
</td>
<td style="text-align:right;">
0.739
</td>
<td style="text-align:right;">
0.853
</td>
</tr>
<tr>
<td style="text-align:left;">
Paar mit Kindern
</td>
<td style="text-align:right;">
0.314
</td>
<td style="text-align:right;">
0.565
</td>
<td style="text-align:right;">
0.822
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.950
</td>
<td style="text-align:right;">
0.932
</td>
<td style="text-align:right;">
0.933
</td>
</tr>
<tr>
<td style="text-align:left;">
Paar mit Nachkommen
</td>
<td style="text-align:right;">
0.445
</td>
<td style="text-align:right;">
0.426
</td>
<td style="text-align:right;">
0.814
</td>
<td style="text-align:right;">
0.950
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.880
</td>
<td style="text-align:right;">
0.877
</td>
</tr>
<tr>
<td style="text-align:left;">
Alleinerziehende
</td>
<td style="text-align:right;">
0.199
</td>
<td style="text-align:right;">
0.617
</td>
<td style="text-align:right;">
0.739
</td>
<td style="text-align:right;">
0.932
</td>
<td style="text-align:right;">
0.880
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.968
</td>
</tr>
<tr>
<td style="text-align:left;">
Sonst. Mehrpersonenhaushalte
</td>
<td style="text-align:right;">
0.204
</td>
<td style="text-align:right;">
0.750
</td>
<td style="text-align:right;">
0.853
</td>
<td style="text-align:right;">
0.933
</td>
<td style="text-align:right;">
0.877
</td>
<td style="text-align:right;">
0.968
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
</div>
<div id="exportieren-von-datensätzen-in-csv-format" class="section level3">
<h3>Exportieren von Datensätzen in csv-Format</h3>
<p>Um diesen Datensatz jetzt wieder zu exportieren, können wir uns eins von den schon beim Einlesen kennengelernten Formaten aussuchen. Hier können wir dann aber leider nicht so einfach die GUI benutzen, wenn wir nicht ein <code>.RData</code>-File erstellen wollen (was wir dieses Semester nicht tun).</p>
<p>Um in <code>csv</code>-Dateien zu exportieren, können wir einfach die <code>write_csv</code>-Funktion aus dem <code>tidyverse</code> verwenden. Sie nimmt wieder einen Datensatz als erstes Argument (pipeline!) und dazu einen Pfad, in den wir unser Ergebnis abspeichern wollen. Wir versuchen mal unsere Korrelationstabelle von eben abzuspeichern. Dabei müssen wir aber darauf achten, dass wir aus der Tabelle ein <code>tibble</code> und am Besten noch die Zeilennamen zu einer Spalte machen, damit diese erhalten bleiben:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="aggregation-und-filemanagement.html#cb361-1" aria-hidden="true" tabindex="-1"></a>correlations <span class="ot">&lt;-</span> </span>
<span id="cb361-2"><a href="aggregation-und-filemanagement.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb361-3"><a href="aggregation-und-filemanagement.html#cb361-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb361-4"><a href="aggregation-und-filemanagement.html#cb361-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb361-5"><a href="aggregation-und-filemanagement.html#cb361-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">&#39;Masseinheit&#39;</span>)</span>
<span id="cb361-6"><a href="aggregation-und-filemanagement.html#cb361-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-7"><a href="aggregation-und-filemanagement.html#cb361-7" aria-hidden="true" tabindex="-1"></a>correlations <span class="sc">%&gt;%</span> </span>
<span id="cb361-8"><a href="aggregation-und-filemanagement.html#cb361-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">&#39;data/correlations.csv&#39;</span>)</span></code></pre></div>
</div>
<div id="exportieren-von-datensätzen-in-excel-format" class="section level3">
<h3>Exportieren von Datensätzen in Excel-Format</h3>
<p>Manchmal ist es aber praktischer (vor allem wenn man einen Bericht in MS Office erstellt), die Ergebnisse als <code>.xlsx</code> zu exportieren.</p>
<p>Das ist leider nicht mit dem <code>readxl</code>-Paket möglich. Dafür benötigen wir das <code>openxlsx</code>-Paket, das natürlich zuerst mit <code>install.packages</code> installiert werden muss.</p>
<p>Mit den Funktionen <code>createWorkbook</code> und <code>addWorksheet</code> können wir ein Excel-Dokument und Tabellen in diesem anlegen, die wir dann mit <code>writeData</code> füllen und mit <code>saveWorkbook</code> abspeichern können.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="aggregation-und-filemanagement.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb362-2"><a href="aggregation-und-filemanagement.html#cb362-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-3"><a href="aggregation-und-filemanagement.html#cb362-3" aria-hidden="true" tabindex="-1"></a>excel_output <span class="ot">&lt;-</span> <span class="fu">createWorkbook</span>()</span>
<span id="cb362-4"><a href="aggregation-und-filemanagement.html#cb362-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-5"><a href="aggregation-und-filemanagement.html#cb362-5" aria-hidden="true" tabindex="-1"></a><span class="fu">addWorksheet</span>(excel_output, <span class="st">&#39;correlations&#39;</span>)</span>
<span id="cb362-6"><a href="aggregation-und-filemanagement.html#cb362-6" aria-hidden="true" tabindex="-1"></a><span class="fu">writeData</span>(excel_output, <span class="st">&#39;correlations&#39;</span>, correlations)</span>
<span id="cb362-7"><a href="aggregation-und-filemanagement.html#cb362-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-8"><a href="aggregation-und-filemanagement.html#cb362-8" aria-hidden="true" tabindex="-1"></a><span class="fu">addWorksheet</span>(excel_output, <span class="st">&#39;original_data&#39;</span>)</span>
<span id="cb362-9"><a href="aggregation-und-filemanagement.html#cb362-9" aria-hidden="true" tabindex="-1"></a><span class="fu">writeData</span>(excel_output, <span class="st">&#39;original_data&#39;</span>, df)</span>
<span id="cb362-10"><a href="aggregation-und-filemanagement.html#cb362-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-11"><a href="aggregation-und-filemanagement.html#cb362-11" aria-hidden="true" tabindex="-1"></a><span class="fu">saveWorkbook</span>(excel_output,<span class="st">&#39;data/output.xlsx&#39;</span>,<span class="at">overwrite =</span> T)</span></code></pre></div>

<!-- #--- -->
<!-- title: 'Psy_B_11: EDV I - Kapitel 6' -->
<!-- subtitle: 'Abbildungen I' -->
<!-- author: "Max Brede" -->
<!-- date: \today -->
<!-- output: -->
<!--   ioslides_presentation: -->
<!--     transition: faster -->
<!--     css: /home/brede/MEGA/Honorar/111220_KfN/styles.css -->
<!--     slide_level: 3 -->
<!-- widescreen: true -->
<!-- --- -->
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="faktoren-und-aggregation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="abbildungen-i.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["EDV1_WS20.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
