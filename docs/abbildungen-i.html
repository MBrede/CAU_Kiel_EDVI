<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Abbildungen I | EDV1</title>
  <meta name="description" content="Einführung in die computerunterstützte Datananalyse mit R" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Abbildungen I | EDV1" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in die computerunterstützte Datananalyse mit R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Abbildungen I | EDV1" />
  
  <meta name="twitter:description" content="Einführung in die computerunterstützte Datananalyse mit R" />
  

<meta name="author" content="Max Brede" />


<meta name="date" content="2021-12-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="aggregation-und-filemanagement.html"/>
<link rel="next" href="abbildungen-ii.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EDV 1</li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html"><i class="fa fa-check"></i>Lehrplan</a>
<ul>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#semesterplan"><i class="fa fa-check"></i>Semesterplan</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#übungsformat"><i class="fa fa-check"></i>Übungsformat</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#lehrziele-für-jede-sitzung"><i class="fa fa-check"></i>Lehrziele für jede Sitzung</a></li>
<li class="chapter" data-level="" data-path="lehrplan.html"><a href="lehrplan.html#prüfungsleistung"><i class="fa fa-check"></i>Prüfungsleistung</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html"><i class="fa fa-check"></i>Vorlesung I - Rste Schritte</a>
<ul>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#organisatorisches"><i class="fa fa-check"></i>Organisatorisches</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#einführung"><i class="fa fa-check"></i>Einführung</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#grundlegende-rechenoperationen"><i class="fa fa-check"></i>Grundlegende Rechenoperationen</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#ausdrücke-funktionen-argumente"><i class="fa fa-check"></i>Ausdrücke, Funktionen, Argumente</a></li>
<li class="chapter" data-level="" data-path="vorlesung-i-rste-schritte.html"><a href="vorlesung-i-rste-schritte.html#objekte"><i class="fa fa-check"></i>Objekte</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html"><i class="fa fa-check"></i>elementare Datenverarbeitung</a>
<ul>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#vektoren"><i class="fa fa-check"></i>Vektoren</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#indizierung"><i class="fa fa-check"></i>Indizierung</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#systematische-wertefolgen-erzeugen"><i class="fa fa-check"></i>Systematische Wertefolgen erzeugen</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#daten-transformieren"><i class="fa fa-check"></i>Daten transformieren</a></li>
<li class="chapter" data-level="" data-path="elementare-datenverarbeitung.html"><a href="elementare-datenverarbeitung.html#einfache-deskriptiv-statistische-kennwerte"><i class="fa fa-check"></i>Einfache deskriptiv-statistische Kennwerte</a></li>
</ul></li>
<li><a href="tidyverse-und-tibbles.html#tidyverse-und-tibbles"><code>tidyverse</code> und <code>tibbles</code></a>
<ul>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html"><i class="fa fa-check"></i>Pakete benutzen</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#datensätze-erstellen-und-ergänzen"><i class="fa fa-check"></i>Datensätze erstellen und ergänzen</a></li>
<li class="chapter" data-level="" data-path="tidyverse-und-tibbles.html"><a href="tidyverse-und-tibbles.html#datensätze-sortieren-und-indizieren"><i class="fa fa-check"></i>Datensätze sortieren und indizieren</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html"><i class="fa fa-check"></i>Faktoren und Aggregation</a>
<ul>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#faktoren"><i class="fa fa-check"></i>Faktoren</a></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#daten-einlesen-i"><i class="fa fa-check"></i>Daten einlesen I</a></li>
<li class="chapter" data-level="" data-path="faktoren-und-aggregation.html"><a href="faktoren-und-aggregation.html#deskriptive-kennwerte"><i class="fa fa-check"></i>deskriptive Kennwerte</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html"><i class="fa fa-check"></i>Aggregation und Filemanagement</a>
<ul>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html#aggregation"><i class="fa fa-check"></i>Aggregation</a></li>
<li class="chapter" data-level="" data-path="aggregation-und-filemanagement.html"><a href="aggregation-und-filemanagement.html#daten-einlesen-ii-und-zusammenfügen"><i class="fa fa-check"></i>Daten einlesen II und zusammenfügen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html"><i class="fa fa-check"></i>Abbildungen I</a>
<ul>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#pivotieren-von-datensätzen"><i class="fa fa-check"></i>Pivotieren von Datensätzen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#diagramme-erstellen"><i class="fa fa-check"></i>Diagramme erstellen</a></li>
<li><a href="abbildungen-i.html#geoms"><code>geom</code>s</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#line-charts"><i class="fa fa-check"></i>line-charts</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#balkendiagramme"><i class="fa fa-check"></i>Balkendiagramme</a></li>
<li class="chapter" data-level="" data-path="abbildungen-i.html"><a href="abbildungen-i.html#verteilungsdarstellungen"><i class="fa fa-check"></i>Verteilungsdarstellungen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html"><i class="fa fa-check"></i>Abbildungen II</a>
<ul>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#gruppierte-darstellungen"><i class="fa fa-check"></i>Gruppierte Darstellungen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#layer-für-zusätzliche-informationen"><i class="fa fa-check"></i>Layer für zusätzliche Informationen</a></li>
<li class="chapter" data-level="" data-path="abbildungen-ii.html"><a href="abbildungen-ii.html#zusätzliche-tweaks"><i class="fa fa-check"></i>Zusätzliche tweaks</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur-1.html"><a href="literatur-1.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDV1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="abbildungen-i" class="section level1">
<h1>Abbildungen I</h1>
<!-- ## Organisatorisches -->
<!-- ### Semesterplan -->
<!-- ```{r, results='asis', echo=F} -->
<!-- a <- read_csv('/home/brede/MEGA/Andres/EDV1/WS20/semesterplan.csv') %>%  -->
<!--   mutate_all(~replace_na(., '')) -->
<!-- a %>%  -->
<!--   kableExtra::kable() %>%  -->
<!--   kableExtra::kable_paper(font_size = 15)  -->
<!-- ``` -->
<div id="pivotieren-von-datensätzen" class="section level2">
<h2>Pivotieren von Datensätzen</h2>
<!-- ### Pivotieren von Datensätzen  -->
<p>Als Vorbereitung auf die Darstellung von Daten brauchen wir noch eine Funktion.</p>
<p>Für das Grafikpaket, das wir benutzen wollen, müssen die Daten im <code>long format</code> vorliegen. Das heißt, dass jede Variable eine Spalte und jede Zeile eine Beobachtung darstellt.</p>
<table class=" lightable-paper" style="font-size: 15px; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
RT
</th>
<th style="text-align:left;">
Bedingung
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Snake Müller
</td>
<td style="text-align:right;">
2624
</td>
<td style="text-align:left;">
t_1
</td>
</tr>
<tr>
<td style="text-align:left;">
Snake Müller
</td>
<td style="text-align:right;">
3902
</td>
<td style="text-align:left;">
t_2
</td>
</tr>
<tr>
<td style="text-align:left;">
Snake Müller
</td>
<td style="text-align:right;">
6293
</td>
<td style="text-align:left;">
t_3
</td>
</tr>
<tr>
<td style="text-align:left;">
Vera Baum
</td>
<td style="text-align:right;">
1252
</td>
<td style="text-align:left;">
t_1
</td>
</tr>
<tr>
<td style="text-align:left;">
Vera Baum
</td>
<td style="text-align:right;">
2346
</td>
<td style="text-align:left;">
t_2
</td>
</tr>
<tr>
<td style="text-align:left;">
Vera Baum
</td>
<td style="text-align:right;">
4321
</td>
<td style="text-align:left;">
t_3
</td>
</tr>
</tbody>
</table>
<table class=" lightable-paper" style="font-size: 15px; font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
t_1
</th>
<th style="text-align:right;">
t_2
</th>
<th style="text-align:right;">
t_3
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Snake Müller
</td>
<td style="text-align:right;">
2624
</td>
<td style="text-align:right;">
3902
</td>
<td style="text-align:right;">
6293
</td>
</tr>
<tr>
<td style="text-align:left;">
Vera Baum
</td>
<td style="text-align:right;">
1252
</td>
<td style="text-align:right;">
2346
</td>
<td style="text-align:right;">
4321
</td>
</tr>
</tbody>
</table>
<p>Insbesondere müssen wir darauf achten, dass alle Werte, die wir zum Beispiel an einer Achse darstellen wollen in einer Variable vorliegen.</p>
<div id="datensatz" class="section level3">
<h3>Datensatz</h3>
<p>Wir nutzen den zusammengefügten Datensatz aus der letzten Sitzung:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="abbildungen-i.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb354-2"><a href="abbildungen-i.html#cb354-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">&#39;data/output.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="dv">2</span>)</span>
<span id="cb354-3"><a href="abbildungen-i.html#cb354-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb354-4"><a href="abbildungen-i.html#cb354-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##      Land              Stadt          
##  Length:30          Length:30         
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##   Kategorie           Merkmal         
##  Length:30          Length:30         
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
##   Stadtteil             Hektar       Einpersonen    
##  Length:30          Min.   : 35.1   Min.   :  70.0  
##  Class :character   1st Qu.:237.3   1st Qu.: 821.5  
##  Mode  :character   Median :357.6   Median :1823.5  
##                     Mean   :380.1   Mean   :2609.1  
##                     3rd Qu.:573.8   3rd Qu.:3795.8  
##                     Max.   :803.5   Max.   :7257.0  
##  Paar ohne Kind   Paar mit Kindern
##  Min.   : 144.0   Min.   : 131.0  
##  1st Qu.: 696.5   1st Qu.: 906.8  
##  Median :1817.5   Median :1831.5  
##  Mean   :1859.6   Mean   :2091.2  
##  3rd Qu.:2573.2   3rd Qu.:2715.5  
##  Max.   :4856.0   Max.   :7703.0  
##  Paar mit Nachkommen Alleinerziehende
##  Min.   :  13.0      Min.   :  17.0  
##  1st Qu.: 141.5      1st Qu.: 150.8  
##  Median : 294.0      Median : 380.5  
##  Mean   : 369.8      Mean   : 504.9  
##  3rd Qu.: 537.0      3rd Qu.: 677.8  
##  Max.   :1271.0      Max.   :1926.0  
##  Sonst. Mehrpersonenhaushalte
##  Min.   :  45.0              
##  1st Qu.: 235.2              
##  Median : 541.5              
##  Mean   : 613.8              
##  3rd Qu.: 850.8              
##  Max.   :1763.0</code></pre>
<p>Um den Datensatz richtig darstellen zu können, müssen wir nun alle Werte, die auf einer Dimension dargestellt werden, in eine Variable pivotieren. Wir wollen als erstes die Anzahl der einzelnen Haushalte in einer Grafik darstellen, pivotieren den Datensatz also so, dass alle Haushalts-Spalten in einer Spalte landen. Dafür nutzen wir die <code>pivot_longer</code>-Funktion:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="abbildungen-i.html#cb356-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb356-2"><a href="abbildungen-i.html#cb356-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">all_of</span>(<span class="fu">c</span>(<span class="st">&quot;Einpersonen&quot;</span>, </span>
<span id="cb356-3"><a href="abbildungen-i.html#cb356-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Paar ohne Kind&quot;</span>, </span>
<span id="cb356-4"><a href="abbildungen-i.html#cb356-4" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Paar mit Kindern&quot;</span>, </span>
<span id="cb356-5"><a href="abbildungen-i.html#cb356-5" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Paar mit Nachkommen&quot;</span>,</span>
<span id="cb356-6"><a href="abbildungen-i.html#cb356-6" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Alleinerziehende&quot;</span>, </span>
<span id="cb356-7"><a href="abbildungen-i.html#cb356-7" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Sonst. Mehrpersonenhaushalte&quot;</span>)),</span>
<span id="cb356-8"><a href="abbildungen-i.html#cb356-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;Haushaltsform&#39;</span>,</span>
<span id="cb356-9"><a href="abbildungen-i.html#cb356-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;Anzahl&#39;</span>)</span>
<span id="cb356-10"><a href="abbildungen-i.html#cb356-10" aria-hidden="true" tabindex="-1"></a>df_long</span></code></pre></div>
<pre><code>## # A tibble: 180 × 8
##    Land  Stadt Kategorie Merkmal           Stadtteil
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;             &lt;chr&gt;    
##  1 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  2 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  3 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  4 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  5 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  6 de-sh Kiel  geo       Flächen in Hektar Altstadt 
##  7 de-sh Kiel  geo       Flächen in Hektar Vorstadt 
##  8 de-sh Kiel  geo       Flächen in Hektar Vorstadt 
##  9 de-sh Kiel  geo       Flächen in Hektar Vorstadt 
## 10 de-sh Kiel  geo       Flächen in Hektar Vorstadt 
##    Hektar Haushaltsform                Anzahl
##     &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;
##  1   35.1 Einpersonen                     384
##  2   35.1 Paar ohne Kind                  305
##  3   35.1 Paar mit Kindern                165
##  4   35.1 Paar mit Nachkommen              29
##  5   35.1 Alleinerziehende                 28
##  6   35.1 Sonst. Mehrpersonenhaushalte    118
##  7   45.9 Einpersonen                     657
##  8   45.9 Paar ohne Kind                  303
##  9   45.9 Paar mit Kindern                167
## 10   45.9 Paar mit Nachkommen              13
## # … with 170 more rows</code></pre>
</div>
</div>
<div id="diagramme-erstellen" class="section level2">
<h2>Diagramme erstellen</h2>
<div id="diagramme" class="section level3">
<h3>Diagramme</h3>
<p>Diagramme als grafische Darstellung deskriptiver und inferenzstatistischer Ergebnisse sind ein wichtiger Teil jeder Auswertung. Natürlich lassen sich diese als Schritt der Auswertung auch in <code>R</code> realisieren. Im Core-Paket von R gibt es einen großen Satz an mitgelieferten Grafikfunktionen. Diese sind aber oft nur mit Mühe zu ästhetischem Wert zu bewegen und oft aufwändig von gewünschter Form zu überzeugen.</p>
</div>
<div id="ggplot2" class="section level3">
<h3><code>ggplot2</code></h3>
<p>Eine Alternative stellt das Zusatzpaket <code>ggplot2</code> dar. Dieses hat den Vorteil einer einheitlichen Syntax für die meisten Grafiken, die wir brauchen werden und macht einige häufig nötige Aspekte grafischer Darstellungen mit deutlich weniger Komplikation zugänglich. Dabei ist die Syntax aber ein wenig gewöhnungsbedürftig.</p>
<p>
Dafür müssen wir zuerst eine Grundebene erstellen, auf die wir die Grafik anschließend layern können.
</p>
<p>
Diese Grundebene kann man sich ein bisschen wie eine leere Leinwand vorstellen.
Dabei wird beim Erstellen der ‘Leinwand’ direkt festgelegt, auf welchen Daten die Abbildung basieren soll und welche Variablen wie dargestellt werden sollen.
</p>
</div>
<div id="grafiken-erstellen" class="section level3">
<h3>Grafiken erstellen</h3>
<p>Grafiken in <code>ggplot2</code> werden alle unabhängig vom Typ der am Ende erzeugten Grafik auf Basis eines <code>ggplot</code>-Objekts erstellt und manipuliert. Dieses <code>ggplot</code>-Objekt wird mit der <code>ggplot</code>-Funktion erstellt und kann sich ein bisschen wie eine leere Leinwand vorgestellt werden.</p>
<p>Diese ‘leere Leinwand’ erwartet einen Datensatz als 1. und das Ergebnis eines Aufrufes der <code>aes()</code>-Funktion als 2. Argument.
Der Datensatz dient dazu einen Variablenraum für die Darstellungen zur Verfügung zu stellen, die <code>aesthetics</code> geben unter anderem an, welche Werte für <em>x</em>- und <em>y</em>-Achse herangezogen werden.</p>
<p>So wollen wir einen Plot vorbereiten, in dem die mittlere Anzahl der Haushalte als Scatterplot gegen die Größe des Viertels abgetragen wird. Dafür pipen wir einfach die mittleren Größen in eine <code>ggplot</code>-Funktion und legen fest, was auf der x und was auf der y-Achse abgetragen werden soll:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="abbildungen-i.html#cb358-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb358-2"><a href="abbildungen-i.html#cb358-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Stadtteil) <span class="sc">%&gt;%</span> </span>
<span id="cb358-3"><a href="abbildungen-i.html#cb358-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">mittlere Anzahl</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">mean</span>(Anzahl),</span>
<span id="cb358-4"><a href="abbildungen-i.html#cb358-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Hektar =</span> Hektar) <span class="sc">%&gt;%</span> </span>
<span id="cb358-5"><a href="abbildungen-i.html#cb358-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar,</span>
<span id="cb358-6"><a href="abbildungen-i.html#cb358-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">`</span><span class="at">mittlere Anzahl</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-151-1.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="geoms" class="section level2">
<h2><code>geom</code>s</h2>
<!-- ### `geom`s -->
<p>Auf diese <em>‘Leinwand’</em> können wir jetzt sogenannte <code>geom</code>s legen, die unsere Daten darstellen. Da wir einen Scatterplot planen, müssen wir nur noch Punkte hinzufügen. Dafür können wir einfach ein <code>point</code>-<code>geom</code> mit der <code>geom_point</code>-Funktion hinzufügen. Um den layer abzutragen, addieren wir einfach das geom hinzu.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="abbildungen-i.html#cb359-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb359-2"><a href="abbildungen-i.html#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Stadtteil) <span class="sc">%&gt;%</span> </span>
<span id="cb359-3"><a href="abbildungen-i.html#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">mittlere Anzahl</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">mean</span>(Anzahl),</span>
<span id="cb359-4"><a href="abbildungen-i.html#cb359-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">Hektar =</span> Hektar) <span class="sc">%&gt;%</span> </span>
<span id="cb359-5"><a href="abbildungen-i.html#cb359-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar,</span>
<span id="cb359-6"><a href="abbildungen-i.html#cb359-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">`</span><span class="at">mittlere Anzahl</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb359-7"><a href="abbildungen-i.html#cb359-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-152-1.png" width="500px" style="display: block; margin: auto;" /></p>
<div id="aesthetics-zur-darstellung-zusätzlicher-variablen" class="section level3">
<h3><code>aesthetics</code> zur Darstellung zusätzlicher Variablen</h3>
<p>Die <code>aes</code>-Funktion kann mit einer ganzen Reihe von zusätzlichen Argumenten umgehen und so mehr grafische Eigenschaften des Plots anpassen.</p>
<p>So könnten wir zum Beispiel die Original-Haushaltsgrößen darstellen wollen, jetzt aber ohne zu mitteln sondern als nach den Stadtteilen eingefärbten Punkten. Außerdem wollen wir jetzt mal die Größe der Punkte mit der Anzahl an Haushalten skalieren und mit den für die Punkte genutzten Symbolen die Haushalte.
Um das ganze übersichtlich zu halten, legen wir uns aber auf die Stadtteile Altstadt, Schreventeich, Exerzierplatz, Gaarden-Ost und Blücherplatz fest.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="abbildungen-i.html#cb360-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb360-2"><a href="abbildungen-i.html#cb360-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Stadtteil <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Altstadt&#39;</span>, </span>
<span id="cb360-3"><a href="abbildungen-i.html#cb360-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Schreventeich&#39;</span>, </span>
<span id="cb360-4"><a href="abbildungen-i.html#cb360-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Exerzierplatz&#39;</span>, </span>
<span id="cb360-5"><a href="abbildungen-i.html#cb360-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Blücherplatz&#39;</span>,</span>
<span id="cb360-6"><a href="abbildungen-i.html#cb360-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Gaarden-Ost&#39;</span>))<span class="sc">%&gt;%</span> </span>
<span id="cb360-7"><a href="abbildungen-i.html#cb360-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar,</span>
<span id="cb360-8"><a href="abbildungen-i.html#cb360-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl,</span>
<span id="cb360-9"><a href="abbildungen-i.html#cb360-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> Stadtteil,</span>
<span id="cb360-10"><a href="abbildungen-i.html#cb360-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> Haushaltsform,</span>
<span id="cb360-11"><a href="abbildungen-i.html#cb360-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb360-12"><a href="abbildungen-i.html#cb360-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="imgs/point_aes.png" width="500px" style="display: block; margin: auto;" /></p>
<p>Schön ist das jetzt nicht, aber es gibt einen Eindruck für die Möglichkeiten, die <code>ggplot</code> bietet.</p>
<p>Die möglichen <code>aes()</code>-Argumente sind die folgenden:</p>
<ul>
<li><code>colour</code>: Eine Variable, die farblich zu codierende Einträge kennzeichnet</li>
<li><code>fill</code>: Eine Variable, die bei Säulendiagrammen u.ä. die zu unterscheidenen Einträge kennzeichnet</li>
<li><code>shape</code>: die bei Punktdiagrammen zu nutzenden Symbole</li>
<li><code>linetype</code>: der bei Liniendiagrammen zu nutzende Linientyp</li>
<li><code>group</code>: Ein für zukünftige Schichten zu berücksichtigender Gruppierungsfaktor</li>
<li><code>alpha</code>: Transparenz der Farben</li>
</ul>
</div>
<div id="grafiken-fine-tunen" class="section level3">
<h3>Grafiken fine-tunen</h3>
<p>Zusätzlich zu der Grundebene und den <code>geom</code>s bietet ggplot noch eine Reihe von Oprimierungs-Stellschrauben an denen wir schrauben können. Die erste die wir angucken, ist die <code>theme</code>-Funktion. Mit der können wir sehr sehr viele Parameter der Grafik anpassen, wir geben uns hier jetzt aber mal mit der Legenden-Position zufrieden:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="abbildungen-i.html#cb361-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb361-2"><a href="abbildungen-i.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Stadtteil <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Altstadt&#39;</span>, </span>
<span id="cb361-3"><a href="abbildungen-i.html#cb361-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Schreventeich&#39;</span>, </span>
<span id="cb361-4"><a href="abbildungen-i.html#cb361-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Exerzierplatz&#39;</span>, </span>
<span id="cb361-5"><a href="abbildungen-i.html#cb361-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Blücherplatz&#39;</span>,</span>
<span id="cb361-6"><a href="abbildungen-i.html#cb361-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Gaarden-Ost&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb361-7"><a href="abbildungen-i.html#cb361-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar,</span>
<span id="cb361-8"><a href="abbildungen-i.html#cb361-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl,</span>
<span id="cb361-9"><a href="abbildungen-i.html#cb361-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> Stadtteil,</span>
<span id="cb361-10"><a href="abbildungen-i.html#cb361-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> Haushaltsform,</span>
<span id="cb361-11"><a href="abbildungen-i.html#cb361-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb361-12"><a href="abbildungen-i.html#cb361-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb361-13"><a href="abbildungen-i.html#cb361-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>)</span></code></pre></div>
<p><img src="imgs/point_aes2.png" width="500px" style="display: block; margin: auto;" /></p>
<p>Nicht viel besser, wir bleiben bei der alten Variante.</p>
</div>
<div id="parameter-mit-den-scale-funktionen-anpassen" class="section level3">
<h3>Parameter mit den <code>scale</code>-Funktionen anpassen</h3>
<p>Wir könnten zum Beispiel neue Farben für unseren Plot festlegen.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="abbildungen-i.html#cb362-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb362-2"><a href="abbildungen-i.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Stadtteil <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Altstadt&#39;</span>, </span>
<span id="cb362-3"><a href="abbildungen-i.html#cb362-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Schreventeich&#39;</span>, </span>
<span id="cb362-4"><a href="abbildungen-i.html#cb362-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Exerzierplatz&#39;</span>, </span>
<span id="cb362-5"><a href="abbildungen-i.html#cb362-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Blücherplatz&#39;</span>,</span>
<span id="cb362-6"><a href="abbildungen-i.html#cb362-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&#39;Gaarden-Ost&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb362-7"><a href="abbildungen-i.html#cb362-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar,</span>
<span id="cb362-8"><a href="abbildungen-i.html#cb362-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl,</span>
<span id="cb362-9"><a href="abbildungen-i.html#cb362-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> Stadtteil,</span>
<span id="cb362-10"><a href="abbildungen-i.html#cb362-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> Haushaltsform,</span>
<span id="cb362-11"><a href="abbildungen-i.html#cb362-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb362-12"><a href="abbildungen-i.html#cb362-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb362-13"><a href="abbildungen-i.html#cb362-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&#39;Set1&#39;</span>)</span></code></pre></div>
<p><img src="imgs/point_aes3.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="line-charts" class="section level2">
<h2>line-charts</h2>
<!-- ### line-charts -->
<p>Andere Darstellungsformen lassen sich dann einfach mit anderen geomen umsetzen. So könnten wir zum Beispiel versuchen die mittleren Temperaturen in Kiel seit beginn der Aufzeichnungen darstellen. Dafür lesen wir zuerst den Datensatz ein:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="abbildungen-i.html#cb363-1" aria-hidden="true" tabindex="-1"></a>weather_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;data/mean_weather.csv&#39;</span>)</span>
<span id="cb363-2"><a href="abbildungen-i.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(weather_df)</span></code></pre></div>
<pre><code>##       year           temp       
##  Min.   :1880   Min.   : 6.250  
##  1st Qu.:1914   1st Qu.: 7.662  
##  Median :1950   Median : 8.308  
##  Mean   :1950   Mean   : 8.374  
##  3rd Qu.:1984   3rd Qu.: 9.051  
##  Max.   :2019   Max.   :10.710</code></pre>
<p>Diese Daten können wir jetzt einfach wieder einer <code>ggplot</code>-Funktion übergeben, auf die wir dann ein Linien-<code>geom</code> layern:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="abbildungen-i.html#cb365-1" aria-hidden="true" tabindex="-1"></a>weather_df <span class="sc">%&gt;%</span> </span>
<span id="cb365-2"><a href="abbildungen-i.html#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb365-3"><a href="abbildungen-i.html#cb365-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> temp)) <span class="sc">+</span></span>
<span id="cb365-4"><a href="abbildungen-i.html#cb365-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-163-1.png" width="500px" style="display: block; margin: auto;" />
Da wir Temperaturen darstellen liegt nahe, die Werte mit einer Farbskala einzufärben:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="abbildungen-i.html#cb366-1" aria-hidden="true" tabindex="-1"></a>weather_df <span class="sc">%&gt;%</span> </span>
<span id="cb366-2"><a href="abbildungen-i.html#cb366-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb366-3"><a href="abbildungen-i.html#cb366-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> temp,</span>
<span id="cb366-4"><a href="abbildungen-i.html#cb366-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> temp)) <span class="sc">+</span></span>
<span id="cb366-5"><a href="abbildungen-i.html#cb366-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-164-1.png" width="500px" style="display: block; margin: auto;" />
Da es sich um Temperaturen handelt ist eine Farbskala von blau bis rot vielleicht näher an der Konvention, dafür können wir eine andere <code>scale</code>-Funktion benutzen:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="abbildungen-i.html#cb367-1" aria-hidden="true" tabindex="-1"></a>weather_df <span class="sc">%&gt;%</span> </span>
<span id="cb367-2"><a href="abbildungen-i.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb367-3"><a href="abbildungen-i.html#cb367-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> temp,</span>
<span id="cb367-4"><a href="abbildungen-i.html#cb367-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> temp)) <span class="sc">+</span></span>
<span id="cb367-5"><a href="abbildungen-i.html#cb367-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb367-6"><a href="abbildungen-i.html#cb367-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">&#39;darkblue&#39;</span>,</span>
<span id="cb367-7"><a href="abbildungen-i.html#cb367-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">high =</span> <span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-165-1.png" width="500px" style="display: block; margin: auto;" /></p>
<p>Um das ein bisschen eindeutiger zu machen, können wir noch die Achsenbeschriftungen ändern und eine Überschrift hinzufügen:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="abbildungen-i.html#cb368-1" aria-hidden="true" tabindex="-1"></a>weather_df <span class="sc">%&gt;%</span> </span>
<span id="cb368-2"><a href="abbildungen-i.html#cb368-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb368-3"><a href="abbildungen-i.html#cb368-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> temp,</span>
<span id="cb368-4"><a href="abbildungen-i.html#cb368-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> temp)) <span class="sc">+</span></span>
<span id="cb368-5"><a href="abbildungen-i.html#cb368-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb368-6"><a href="abbildungen-i.html#cb368-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">&#39;darkblue&#39;</span>,</span>
<span id="cb368-7"><a href="abbildungen-i.html#cb368-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">high =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb368-8"><a href="abbildungen-i.html#cb368-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;mittlere Jahrestemperatur in Kiel&#39;</span>,</span>
<span id="cb368-9"><a href="abbildungen-i.html#cb368-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Jahr&#39;</span>,</span>
<span id="cb368-10"><a href="abbildungen-i.html#cb368-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;mittlere Temperatur °C&#39;</span>,</span>
<span id="cb368-11"><a href="abbildungen-i.html#cb368-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&#39;°C&#39;</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-166-1.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
<div id="balkendiagramme" class="section level2">
<h2>Balkendiagramme</h2>
<!-- ### Balkendiagramme zur Darstellung von festen Werten -->
<p>In vielen Publikationen finden sich Balkendiagramme mit Streuungsbalken, die zur Illustration von Mittelwertsvergleichen eingesetzt werden.</p>
<p>Um so ein Diagramm zu erstellen, beginnen wir mit der Aggregation unserer Werte. Da wir die oberen un unteren Grenzen der Fehlerbalken festlegen müssen, erstellen wir gleich je eine Spalte mit den Mittelwerten plus und minus den SEM.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="abbildungen-i.html#cb369-1" aria-hidden="true" tabindex="-1"></a>agg_df <span class="ot">&lt;-</span> df_long <span class="sc">%&gt;%</span> </span>
<span id="cb369-2"><a href="abbildungen-i.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Haushaltsform) <span class="sc">%&gt;%</span> </span>
<span id="cb369-3"><a href="abbildungen-i.html#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">m_anzahl =</span> <span class="fu">mean</span>(Anzahl),</span>
<span id="cb369-4"><a href="abbildungen-i.html#cb369-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sem_anzahl =</span> <span class="fu">sqrt</span>(<span class="fu">var</span>(Anzahl) <span class="sc">/</span> <span class="fu">length</span>(Anzahl)),</span>
<span id="cb369-5"><a href="abbildungen-i.html#cb369-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">lower =</span> m_anzahl <span class="sc">-</span> sem_anzahl,</span>
<span id="cb369-6"><a href="abbildungen-i.html#cb369-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">upper =</span> m_anzahl <span class="sc">+</span> sem_anzahl)</span></code></pre></div>
<p>Diesen Datensatz übergeben wir jetzt wieder der <code>ggplot</code>-Funktion:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="abbildungen-i.html#cb370-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> agg_df <span class="sc">%&gt;%</span> </span>
<span id="cb370-2"><a href="abbildungen-i.html#cb370-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Haushaltsform,</span>
<span id="cb370-3"><a href="abbildungen-i.html#cb370-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> m_anzahl))</span></code></pre></div>
<p>Auf deren Ergebnis wir dann das <code>geom_col</code>-<code>geom</code> addieren:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="abbildungen-i.html#cb371-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-169-1.png" width="500px" style="display: block; margin: auto;" /></p>
<p>Das können wir ein bisschen schöner machen, indem wir die Balken einfärben:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="abbildungen-i.html#cb372-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Haushaltsform)) <span class="sc">+</span></span>
<span id="cb372-2"><a href="abbildungen-i.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&#39;Set1&#39;</span>)</span>
<span id="cb372-3"><a href="abbildungen-i.html#cb372-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-4"><a href="abbildungen-i.html#cb372-4" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-170-1.png" width="500px" style="display: block; margin: auto;" />
Jetzt fügen wir der Grafik mit <code>geom_errorbar</code> die SEM-Fehlerbalken hinzu:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="abbildungen-i.html#cb373-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, </span>
<span id="cb373-2"><a href="abbildungen-i.html#cb373-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ymax =</span> upper),</span>
<span id="cb373-3"><a href="abbildungen-i.html#cb373-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">width =</span> .<span class="dv">25</span>)</span>
<span id="cb373-4"><a href="abbildungen-i.html#cb373-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-5"><a href="abbildungen-i.html#cb373-5" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-171-1.png" width="500px" style="display: block; margin: auto;" />
Um den Graphen ein bisschen lesbarer zu machen, tauschen wir x- und y-Achse:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="abbildungen-i.html#cb374-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-172-1.png" width="500px" style="display: block; margin: auto;" />
…und ändern wieder die Achsenbeschriftung:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="abbildungen-i.html#cb375-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb375-2"><a href="abbildungen-i.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;mittlere Anzahl +/- SEM&#39;</span>,</span>
<span id="cb375-3"><a href="abbildungen-i.html#cb375-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Haushaltsform&#39;</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-173-1.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
<div id="verteilungsdarstellungen" class="section level2">
<h2>Verteilungsdarstellungen</h2>
<div id="histogramme" class="section level3">
<h3>Histogramme</h3>
<p>Um ein Histogramm zu erstellen, müssen wir nur auf einen <code>ggplot</code> mit einem festgelegt <code>x</code>-aesthetic ein <code>geom_histogram</code> addieren. So könnten wir uns die Hektarzahlen in unserem originalen, nicht pivotierten Kiel-Datensatz anschauen:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="abbildungen-i.html#cb376-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb376-2"><a href="abbildungen-i.html#cb376-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar)) <span class="sc">+</span></span>
<span id="cb376-3"><a href="abbildungen-i.html#cb376-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-174-1.png" width="500px" style="display: block; margin: auto;" />
Das ist jetzt nicht besonders schön, mit einem Festlegen von aesthetics außerhalb der <code>aes</code>-Funktion können wir aber für alle Teile des Plots einen Wert festlegen. So können wir die Flächen mit weiß füllen und hellgrau umreißen:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="abbildungen-i.html#cb377-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb377-2"><a href="abbildungen-i.html#cb377-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar)) <span class="sc">+</span></span>
<span id="cb377-3"><a href="abbildungen-i.html#cb377-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb377-4"><a href="abbildungen-i.html#cb377-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-175-1.png" width="500px" style="display: block; margin: auto;" />
Wir können außerdem die Breite der dargestellten Balken anpassen. mit dem <code>bins</code>-Argument können wir eine Anzahl an Balken festlegen…</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="abbildungen-i.html#cb378-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb378-2"><a href="abbildungen-i.html#cb378-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar)) <span class="sc">+</span></span>
<span id="cb378-3"><a href="abbildungen-i.html#cb378-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb378-4"><a href="abbildungen-i.html#cb378-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>,</span>
<span id="cb378-5"><a href="abbildungen-i.html#cb378-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-176-1.png" width="500px" style="display: block; margin: auto;" />
…mit dem <code>binwidth</code>-Argument eine Breite für die Balken:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="abbildungen-i.html#cb379-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb379-2"><a href="abbildungen-i.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Hektar)) <span class="sc">+</span></span>
<span id="cb379-3"><a href="abbildungen-i.html#cb379-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb379-4"><a href="abbildungen-i.html#cb379-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>,</span>
<span id="cb379-5"><a href="abbildungen-i.html#cb379-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-177-1.png" width="500px" style="display: block; margin: auto;" /></p>
</div>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>Eine sehr praktische Art und Weise Verteilungen darzustellen, vor allem wenn man die Verteilungen von Gruppen darstellen möchte, sind <em>Boxplots</em>. Hierfür definieren wir einfach einen base-layer mit der Gruppierungsvariable auf der x-Achse und einer numerischen Variable auf der y-Achse:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="abbildungen-i.html#cb380-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb380-2"><a href="abbildungen-i.html#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Stadtteil, </span>
<span id="cb380-3"><a href="abbildungen-i.html#cb380-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb380-4"><a href="abbildungen-i.html#cb380-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-178-1.png" width="500px" style="display: block; margin: auto;" />
Um die Achsenbeschriftung lesbarer zu machen könnten wir jetzt entweder erneut die Achsen flippen:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="abbildungen-i.html#cb381-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb381-2"><a href="abbildungen-i.html#cb381-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Stadtteil, </span>
<span id="cb381-3"><a href="abbildungen-i.html#cb381-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb381-4"><a href="abbildungen-i.html#cb381-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb381-5"><a href="abbildungen-i.html#cb381-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-179-1.png" width="500px" style="display: block; margin: auto;" />
Oder die Achsenbeschriftung mit einem neuen Argument der <code>theme</code>-Funktion drehen. Dieses erwartet ein Ergebnis der <code>element_text</code>-Funktion, die die Möglichkeit bietet, ästhetische Parameter für Schriftzüge festzulegen, so zum Beispiel den Winkel (<code>angle</code> in °) und die Adjustierung entlang der x-Achse (<code>hjust</code>):</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="abbildungen-i.html#cb382-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="sc">%&gt;%</span> </span>
<span id="cb382-2"><a href="abbildungen-i.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Stadtteil, </span>
<span id="cb382-3"><a href="abbildungen-i.html#cb382-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> Anzahl)) <span class="sc">+</span></span>
<span id="cb382-4"><a href="abbildungen-i.html#cb382-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb382-5"><a href="abbildungen-i.html#cb382-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,</span>
<span id="cb382-6"><a href="abbildungen-i.html#cb382-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="EDV1_WS20_files/figure-html/unnamed-chunk-180-1.png" width="500px" style="display: block; margin: auto;" /></p>

<!-- #--- -->
<!-- title: 'Psy_B_11: EDV I - Kapitel 7' -->
<!-- subtitle: 'Abbildungen II' -->
<!-- author: "Max Brede" -->
<!-- date: \today -->
<!-- output: -->
<!--   ioslides_presentation: -->
<!--     transition: faster -->
<!--     css: /home/brede/MEGA/Honorar/111220_KfN/styles.css -->
<!--     slide_level: 3 -->
<!-- widescreen: true -->
<!-- --- -->
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="aggregation-und-filemanagement.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="abbildungen-ii.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["EDV1_WS20.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
